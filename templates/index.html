<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToL VIS</title>
    <!-- CSSファイルを正しいパスで読み込む -->
    <link rel="stylesheet" href="../static/css/styles.css">
    <!-- 必要な外部スクリプト -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
</head>
<body>
    <!-- サンバースト図関連要素 -->
    <div class="tooltip" style="opacity: 0;"></div>
    <div id="nodeCount">Nodes displayed: 0</div>
    <div id="overview" style="position: absolute; top: 100px; right: 10px; width: 200px; height: 200px; border: 1px solid #ccc;">
        <canvas id="overviewCanvas" width="200" height="200"></canvas>
    </div>
    <div id="pathDisplay" style="position: absolute; right: 20%; top: 20%; padding: 10px; width: 300px; height: auto;">クリックノードのルートからのパス: </div>
    <div>
        <input type="text" id="searchInput" placeholder="学名を入力">
        <button onclick="fetchSearchCandidates()">検索</button>
        <div id="searchDropdown" style="display: none;"></div>
    </div>
    <div id="ancestorDisplay" style="position: absolute; right: 20%; bottom: 20%; padding: 10px; width: 300px; height: auto;">先祖リスト: </div>
    <div id="ancestorMessage" style="position: absolute; right: 20%; bottom: 15%; padding: 10px; width: 300px; height: auto;"></div>

    <!-- Flaskから渡された設定データをスクリプトに埋め込む -->
    <script>
        window.graphConfig = {
            colorChange: {{ colorChange|tojson }},
            animation: {{ animation|tojson }},
            ease: {{ ease|tojson }},
            timing: {{ timing|tojson }},
            topNode: {{ topNode|tojson }}
        };

    </script>

    <!-- 動的スクリプト読み込みを含むJSファイル -->
    <script src="../static/js/script.js"></script>
</body>
</html>
